name: RimayAlert â€” Docker Image

on:
  workflow_run:
    workflows: [ "Django CI" ]
    types:
      - completed

jobs:
  docker:
    if: >
      github.event.workflow_run.conclusion == 'success' &&
      (github.event.workflow_run.head_branch == 'main' ||
       github.event.workflow_run.head_branch == 'develop')

    uses: freddyandreszambrano/Platform-CI/.github/workflows/django-docker-image.yml@main
    with:
      docker_image: ${{ vars.DOCKER_IMAGE }}
      dockerfile: Dockerfile.production

    secrets:
      DOCKER_USERNAME: ${{ secrets.DOCKER_USERNAME }}
      DOCKER_PASSWORD: ${{ secrets.DOCKER_PASSWORD }}
